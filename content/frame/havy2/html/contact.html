<style>
.write-area
{
	width: 100%;
	padding: 10px;
	
	text-align: center;
	
	display: none;
}

.write-area .input-group, .write-area input, .write-area textarea
{
	width: 100%;
}

.write-area textarea
{
	height: 200px;
}

.write-area .input-group
{
	margin: 10px 0;
} 
</style>

<script id="qna-template" type="text/x-handlebars-template">
<table class="qnaTable">
<colgroup>
	<col style="width: 10%;"/>
	<col style="width: 50%;"/>
	<col style="width: 15%;"/>
	<col style="width: 15%;"/>
	<col style="width: 10%;"/>
</colgroup>
<thead>
	<tr>
		<th>번호</th>
		<th>제목</th>
		<th>작성자</th>
		<th>작성일</th>
		<th>조회</th>
	</tr>
</thead>
<tbody data-parts="body" data-template-id="qna-list"></tbody>
</table>
<div class="pagination" data-parts="pagination" data-template-id="qna-pagination"></div>
</script>

<script id="qna-list" type="text/x-handlebars-template">
{{#if articleList}}
{{#each articleList}}
<tr{{#equals isNotice "Y"}} class="notice"{{/equals}}>
	<td align="center">
		{{#equals isNotice "Y"}}
			<span>FAQ</span>
		{{/equals}}
		{{#notequals isNotice "Y"}}
			{{seq}}
		{{/notequals}}
	</td>
	<td>
		{{#equals isNotice "Y"}}
			<a href="?body=viewArticle&boardId=qna&seq={{seq}}" {{#equals isNotice "Y"}}style="font-weight:bold;"{{/equals}}>{{subject}}</a>
		{{/equals}}
		{{#notequals isNotice "Y"}}
			<a href="?body=viewQna&seq={{seq}}" {{#equals isNotice "Y"}}style="font-weight:bold;"{{/equals}}>{{subject}}</a>
		{{/notequals}}
		{{#notequals isNotice "Y"}}
		{{#sign commentCount ">" 0}}
		<span class="answered">[답변]</span>
		{{/sign}}
		{{#sign commentCount "<=" 0}}
		<span>[미답변]</span>
		{{/sign}}
		{{/notequals}}
	</td>
	<td align="center">{{writerName}}</td>
	<td align="center">{{shortDate registerDate}}</td>
	<td align="center">{{hit}}</td>
</tr>
{{/each}}
{{else}}
<tr>
	<td align="center" colspan="5">등록된 수강문의가 없습니다</td>
</tr>
{{/if}}
</script>

<script id="qna-pagination" type="text/x-handlebars-template">
{{#sign pageIndex ">" "1"}}
<a style="font-size:12px;" href="?body=qna&pageIndex={{math pageIndex "-" 1}}">이전</a>
{{/sign}}
{{#if pageList}}
{{#each pageList}}
<a class="number {{#equals ../pageIndex pageNumber}}selected{{/equals}}" href="?body=qna&pageIndex={{pageNumber}}">{{pageNumber}}</a>
{{/each}}
{{/if}}
{{#if maxPage}}
{{#notequals pageIndex maxPage}}
<a href="?body=qna&pageIndex={{math pageIndex "+" 1}}">다음</a>
{{/notequals}}
{{/if}}
</script>

<script>
var savedSeq = null;
$(document).ready(function()
{
	$('#contactWrite').on('click', function()
	{
		$(this).hide().parent().next().show();		
	});
	
	$('#cancelWrite').on('click', function()
	{
		$(this).parent().parent().hide().parent().show();	
	});
	
	$('#write').on('click', function()
	{
		$('#writeForm').submit();
	});
	
	formSubmit('#writeForm', function(param)
	{
		param.boardId = "qna";
		var result = null;
		if(savedSeq != null)
		{
			param.seq = savedSeq;
			result = $.api.article.updateArticle(param);
		}
		else
		{
			result = $.api.article.writeArticle(param);
		}
		
		if(result != null)
		{
			if(result.code == -9998)
			{
				alert("권한이 없습니다");
			}
			else
			{
				console.log("리절트 : ", result);
			}
		}
	});
});
</script>

<div>
	<img src="#{path.root}/images/contact/contact.png" style="width: 100%;">
</div>
<div style="text-align: center; margin: 30px 0;">
	<img src="#{path.root}/images/contact/contact_write.png" style="width: 100px;" id="contactWrite">
</div>
<form class="write-area" id="writeForm">
	<div class="input-group">
		<input type="text" name="subject" class="form-control" placeholder="제목" style="width: 70%;"> <input type="text" name="writerName" class="form-control" placeholder="이름" style="width: 29%;">
	</div>
	<div class="input-group">
		<textarea name="content" class="form-control" placeholder="내용"></textarea>
	</div>
	<div class="input-group">
		<input type="password" name="password" class="form-control" placeholder="비밀번호">
	</div>
	<div>
		<img src="#{path.root}/images/contact/write.png" style="width: 100px;" id="write">
		<p style="margin-top: 15px;"><a href="#" id="cancelWrite" style="color: #343434;">돌아가기</a></p>
	</div>
</form>
<div data-bind="articleComponent" data-param='{"boardId" : "qna", "cpp" : 10}' data-template-id="qna-template"></div>