<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE"/>
<meta name="viewport" content="width=device-width" />

<title>사용자정보편집</title>

<link rel="stylesheet" type="text/css" href="/content/module/imboard/css/imboard-reset-1.0.css" />
<link rel="stylesheet" type="text/css" href="/content/module/imboard/css/imboard-ui-1.0.css" />

<script src="/content/lib/jquery/jquery-1.10.2.js"></script>
<script src="/content/lib/handlebars/handlebars-v1.3.0.js"></script>

<script src="/content/module/imboard/js/imboard-api-1.0.js"></script>
<script src="/content/module/imboard/js/imboard-1.0.js"></script>
<script src="/content/module/imboard/js/imboard-ui-1.0.js"></script>

<script>
$(document).ready(function()
{
	var rect = $("#container").get(0).getBoundingClientRect();
	$("#container").css("margin-top", $(window).height()/2.3 - rect.height/2 + "px");
	
	$("#form").compile(function(data)
	{
		var result = $.api.user.insertUser(data);
		if(result.code == 1000)
		{
			location.href = "/redirect";
		}
		else
		{
			alert("사용자등록이 실패했습니다.");
		}
	});
});
</script>
</head>
<body>
	<div class="user-profile">
		<h2 style="margin:40px 0;">당신의 정보를 입력해주세요</h2>
		<form data-component="form" id="userProfileForm">
			<p style="height: 35px;">
				<a class="profileImgButton"><span class="glyphicon glyphicon-picture"></span> <span>업로드</span><input type="file" class="hiddenFile" id="hiddenFile" style="display:inline;"/></a>
				<a class="profileImgButton" id="linkUrlImg"><span class="glyphicon glyphicon-link"></span> <span>URL</span></a>
				<input type="text" id="urlInput" class="linkUrl" placeholder="url을 입력해주세요"/>
			</p>
			<div class="profileImageContainer" data-bind="signedUser">
			{{#if user.profileImgUrl}}
				<img src="{{user.profileImgUrl}}" style="width: 100%;"/>
			{{else}}
				<div class="verticalBar"></div>
				<span>프로필 이미지를 등록해주세요</span>
			{{/if}}
			</div>
			<hr/>
			<p>
				<input type="hidden" name="id" value="#{user.id}" id="userId"/>
				<input type="hidden" name="provider" value="#{user.provider}"/>
				<input type="text" name="displayId" class="textinput" style="font-size:15px; width: 250px;" placeholder="필명" value="#{user.displayId}" required="required" autofocus="autofocus"/>
				<label id="displayIdResult" style="display:none; color:red;">중복된 필명입니다.</label>
			</p>
			<p>
				<textarea name="name" class="textinput" style="font-size:15px; width: 250px; height: 150px;" placeholder="당신을 자유롭게 소개해주세요">#{user.name}</textarea>
			</p>
			<p>
				<input type="submit" class="btn btn-default" style="font-size:15px;" value="저장"/>
			</p>
		</form>
	</div>
</body>
</html>